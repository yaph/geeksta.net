"use strict";function drawPie(selector,data){var measure=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"Count";var series=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"Response";var spec={"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"A simple pie chart with embedded data.","data":{"values":data},"mark":{type:"arc",tooltip:true},"encoding":{"theta":{"field":measure,"type":"quantitative"},"color":{"field":series,"type":"nominal"}}};vegaEmbed(selector,spec)}fetch("/data/tell-weight.csv").then(function(resp){return resp.text()}).then(function(text){var data=d3.csvParse(text);var females=data.filter(function(d){return d.Gender=="female"});var males=data.filter(function(d){return d.Gender=="male"});var count_females=females.reduce(function(a,b){return+b.Count+a},0);var count_males=males.reduce(function(a,b){return+b.Count+a},0);var totals=[{"Gender":"male","Count":count_males},{"Gender":"female","Count":count_females}];drawPie("#pie-female",females);drawPie("#pie-male",males);drawPie("#pie-ratio",totals,"Count","Gender");d3.select(".count-females").text(count_females);d3.select(".count-males").text(count_males);d3.select(".count-total").text(count_females+count_males)});